webpackJsonp([12],{"dF+H":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("P9l9"),n=a("0w2Z"),l={name:"couponList",filters:{time:function(e){return Object(n.b)(e)},date:function(e){return Object(n.c)(e)}},data:function(){return{loading:!1,showCouPonRoute:!1,formData:{keyword:"",couponTypes:[],couponType:""},page:1,size:20,total:0,tableData:[]}},watch:{$route:function(e,t){"/couponMsg"!=t.path&&"/createCoupon"!=t.path||(this.showCouPonRoute=!1,this.cardClass())}},methods:{showCoupon:function(e){this.showCouPonRoute=!0,this.$router.push("/couponMsg?id="+e)},getDicts:function(){var e=this;Object(o.q)({itemType:"cardType"}).then(function(t){for(var a in t.data.body){var o={label:t.data.body[a],value:a};e.formData.couponTypes.push(o)}})},createCoupon:function(){this.showCouPonRoute=!0,this.$router.push("/createCoupon")},handleSizeChange:function(e){this.size=e,this.cardClass()},handleCurrentChange:function(e){this.page=e,this.cardClass()},cardClass:function(){var e=this,t={cardType:this.formData.couponType,keyName:this.formData.keyword,page:this.page-1,pageSize:this.size};this.loading=!0,Object(o.f)(t,"show").then(function(t){e.loading=!1,e.tableData=t.data.body.data,e.total=t.data.body.count})}},created:function(){this.getDicts()},mounted:function(){this.cardClass(),"/createCoupon"!=window.location.hash.substring(1,window.location.hash.length)&&"/couponMsg"!=window.location.hash.substring(1,window.location.hash.indexOf("?"))||(this.showCouPonRoute=!0)}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"couponList"},[a("transition",{attrs:{name:"fade",mode:"in-out"}},[e.showCouPonRoute?a("router-view"):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.showCouPonRoute?e._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{staticClass:"form",attrs:{"label-width":"0.8rem",inline:!0}},[a("el-form-item",{attrs:{label:"关键字:"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入卡券代码或名称"},model:{value:e.formData.keyword,callback:function(t){e.$set(e.formData,"keyword",t)},expression:"formData.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"卡券类型:"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.formData.couponType,callback:function(t){e.$set(e.formData,"couponType",t)},expression:"formData.couponType"}},e._l(e.formData.couponTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.cardClass}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"couponList"},[a("h2",[e._v("数据列表 "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:e.createCoupon}},[e._v("创建卡券")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",margin:".1rem"},attrs:{border:"",size:"small",data:e.tableData,height:"5.6rem"}},[a("el-table-column",{attrs:{align:"center",prop:"code",label:"卡券代码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"卡券类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"卡券名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110px",prop:"staTime",label:"生效时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("date")(t.row.staTime)))])]}}],null,!1,786256036)}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110px",prop:"expTime",label:"过期时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("date")(t.row.expTime)))])]}}],null,!1,2824901775)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"price",label:"终端价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"needProveNum",label:"所需佐证数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110px",prop:"insTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("time")(t.row.insTime)))])]}}],null,!1,2506858871)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.showCoupon(t.row.id)}}},[e._v("查看")])]}}],null,!1,2735111367)})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.page,"page-sizes":[20,100,200,300,400],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("lqK5")},"data-v-77518a8d",null);t.default=r.exports},lqK5:function(e,t){}});
//# sourceMappingURL=12.b63b0c5c033e8b5e95df.js.map