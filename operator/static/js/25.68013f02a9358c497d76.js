webpackJsonp([25],{"3U2W":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("P9l9"),s=a("0w2Z"),o={name:"businessList",filters:{time:function(t){return Object(s.b)(t)},collStatus:function(t){return 0==t?"合作":"终止"},serviceStatus:function(t){return 0==t?"营业":"歇业"}},data:function(){return{loading:!1,showCouPonRoute:!1,formData:{keyword:"",couponTypes:[],couponType:""},tableData:[1],page:1,pageSize:20,total:0}},watch:{$route:function(t,e){"/createBusiness"!=e.path&&"/businessDetail"!=e.path||(this.showCouPonRoute=!1,this.store())}},methods:{handleSizeChange:function(t){this.pageSize=t,this.store()},handleCurrentChange:function(t){this.page=t,this.store()},showBusiness:function(t){this.showCouPonRoute=!0,this.$router.push("/businessDetail?id="+t)},createBusiness:function(){this.showCouPonRoute=!0,this.$router.push("/createBusiness")},delBusiness:function(t){var e=this;this.$confirm("此操作将永久删除该商户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={uid:JSON.parse(window.sessionStorage.getItem("user")).uId,storeIds:t};Object(n.m)(a).then(function(t){1==t.data.code?(e.$notify({title:"成功",message:t.data.msg,type:"success"}),e.store()):e.$notify.error({title:"错误",message:t.data.msg})})})},sreach:function(){this.pageSize=20,this.page=1,this.store()},store:function(){var t=this;this.loading=!0;var e={keyName:this.formData.keyword,pageSize:this.pageSize,page:this.page-1};Object(n.w)(e,!0).then(function(e){t.loading=!1,1==e.data.code&&(t.tableData=e.data.body.data,t.total=e.data.body.count)})}},mounted:function(){this.store(),"/createBusiness"!=window.location.hash.substring(1,window.location.hash.length)&&"/businessDetail"!=window.location.hash.substring(1,window.location.hash.indexOf("?"))||(this.showCouPonRoute=!0)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"businessList"},[t.showCouPonRoute?a("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[a("router-view")],1):a("div",[a("el-form",{staticClass:"form",attrs:{"label-width":"0.8rem",inline:!0}},[a("el-form-item",{attrs:{label:"关键字:"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"商户名称或联系人"},model:{value:t.formData.keyword,callback:function(e){t.$set(t.formData,"keyword",e)},expression:"formData.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sreach}},[t._v("查询")])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"businessList"},[a("h2",[t._v("数据列表 "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.createBusiness}},[t._v("创建商户")])],1),t._v(" "),a("el-table",{staticStyle:{width:"98%",margin:".1rem"},attrs:{border:"",height:"5.6rem",data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"商户名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"companyName",label:"主体名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"location",label:"商户地址"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"90px",prop:"phone",label:"商户电话"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"contacts",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"serviceStatus",label:"营业状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("serviceStatus")(e.row.serviceStatus)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"collStatus",label:"合作状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("collStatus")(e.row.collStatus)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"supCardNum",label:"支持卡券数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operateUser",label:"联络人"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110px",prop:"insTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("time")(e.row.insTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.showBusiness(e.row.id)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.delBusiness(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.page,"page-sizes":[20,100,200,300,400],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(t){a("nc7O")},null,null);e.default=l.exports},nc7O:function(t,e){}});
//# sourceMappingURL=25.68013f02a9358c497d76.js.map